
 RUN  v3.2.4 /Users/rinaldo/Documents/Cline/MCP/mcp-open-webresearch

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through an HTTP proxy
loader: no error
visit: the current config is  {
  defaultSearchEngines: [ [32m'bing'[39m, [32m'duckduckgo'[39m, [32m'brave'[39m ],
  proxy: {
    url: [32m'http://localhost:8000'[39m,
    enabled: [33mtrue[39m,
    isValid: [33mtrue[39m,
    protocol: [32m'http'[39m,
    error: [1mnull[22m,
    host: [32m'localhost'[39m,
    port: [33m8000[39m,
    username: [32m''[39m,
    password: [32m''[39m,
    agent: { http: [36m[HttpsProxyAgent][39m, https: [36m[HttpsProxyAgent][39m }
  },
  enableCors: [33mfalse[39m,
  corsOrigin: [32m'*'[39m
}
visit: config.proxy.enabled: true
visit: config.proxy.isValid: true
visit: config.proxy.url: http://localhost:8000
Proxy configuration detected: http://localhost:8000
Using proxy: http://localhost:8000

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through an HTTP proxy
Page closed event detected

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through an HTTP proxy
We assume the page closed successfully for url:  http://example.com/

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through an HTTP proxy
Browser closed successfully

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through an HTTP proxy
Screenshots directory is empty

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through an HTTP proxy
Session cleanup completed successfully

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a SOCKS5 proxy
loader: no error
visit: the current config is  {
  defaultSearchEngines: [ [32m'bing'[39m, [32m'duckduckgo'[39m, [32m'brave'[39m ],
  proxy: {
    url: [32m'socks5://localhost:10800'[39m,
    enabled: [33mtrue[39m,
    isValid: [33mtrue[39m,
    protocol: [32m'socks5'[39m,
    error: [1mnull[22m,
    host: [32m'localhost'[39m,
    port: [33m10800[39m,
    username: [32m''[39m,
    password: [32m''[39m,
    agent: { http: [36m[SocksProxyAgent][39m, https: [36m[SocksProxyAgent][39m }
  },
  enableCors: [33mfalse[39m,
  corsOrigin: [32m'*'[39m
}
visit: config.proxy.enabled: true
visit: config.proxy.isValid: true
visit: config.proxy.url: socks5://localhost:10800
Proxy configuration detected: socks5://localhost:10800
Using proxy: socks5://localhost:10800

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a SOCKS5 proxy
Page closed event detected

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a SOCKS5 proxy
We assume the page closed successfully for url:  http://example.com/

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a SOCKS5 proxy
Browser closed successfully

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a SOCKS5 proxy
Screenshots directory is empty

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a SOCKS5 proxy
Session cleanup completed successfully

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a SOCKS4a proxy
loader: no error
visit: the current config is  {
  defaultSearchEngines: [ [32m'bing'[39m, [32m'duckduckgo'[39m, [32m'brave'[39m ],
  proxy: {
    url: [32m'socks4a://localhost:10801'[39m,
    enabled: [33mtrue[39m,
    isValid: [33mtrue[39m,
    protocol: [32m'socks4a'[39m,
    error: [1mnull[22m,
    host: [32m'localhost'[39m,
    port: [33m10801[39m,
    username: [32m''[39m,
    password: [32m''[39m,
    agent: { http: [36m[SocksProxyAgent][39m, https: [36m[SocksProxyAgent][39m }
  },
  enableCors: [33mfalse[39m,
  corsOrigin: [32m'*'[39m
}
visit: config.proxy.enabled: true
visit: config.proxy.isValid: true
visit: config.proxy.url: socks4a://localhost:10801
Proxy configuration detected: socks4a://localhost:10801
Using proxy: socks4a://localhost:10801

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a SOCKS4a proxy
Page closed event detected

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a SOCKS4a proxy
We assume the page closed successfully for url:  http://example.com/

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a SOCKS4a proxy
Browser closed successfully

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a SOCKS4a proxy
Screenshots directory is empty

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a SOCKS4a proxy
Session cleanup completed successfully

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a SOCKS4 proxy
loader: no error
visit: the current config is  {
  defaultSearchEngines: [ [32m'bing'[39m, [32m'duckduckgo'[39m, [32m'brave'[39m ],
  proxy: {
    url: [32m'socks4://localhost:10802'[39m,
    enabled: [33mtrue[39m,
    isValid: [33mtrue[39m,
    protocol: [32m'socks4'[39m,
    error: [1mnull[22m,
    host: [32m'localhost'[39m,
    port: [33m10802[39m,
    username: [32m''[39m,
    password: [32m''[39m,
    agent: { http: [36m[SocksProxyAgent][39m, https: [36m[SocksProxyAgent][39m }
  },
  enableCors: [33mfalse[39m,
  corsOrigin: [32m'*'[39m
}
visit: config.proxy.enabled: true
visit: config.proxy.isValid: true
visit: config.proxy.url: socks4://localhost:10802
Proxy configuration detected: socks4://localhost:10802
Using proxy: socks4://localhost:10802

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a SOCKS4 proxy
Page closed event detected

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a SOCKS4 proxy
We assume the page closed successfully for url:  http://example.com/

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a SOCKS4 proxy
Browser closed successfully

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a SOCKS4 proxy
Screenshots directory is empty

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a SOCKS4 proxy
Session cleanup completed successfully

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should prioritize SOCKS5 over HTTP proxy
loader: no error
visit: the current config is  {
  defaultSearchEngines: [ [32m'bing'[39m, [32m'duckduckgo'[39m, [32m'brave'[39m ],
  proxy: {
    url: [32m'socks5://localhost:10800'[39m,
    enabled: [33mtrue[39m,
    isValid: [33mtrue[39m,
    protocol: [32m'socks5'[39m,
    error: [1mnull[22m,
    host: [32m'localhost'[39m,
    port: [33m10800[39m,
    username: [32m''[39m,
    password: [32m''[39m,
    agent: { http: [36m[SocksProxyAgent][39m, https: [36m[SocksProxyAgent][39m }
  },
  enableCors: [33mfalse[39m,
  corsOrigin: [32m'*'[39m
}
visit: config.proxy.enabled: true
visit: config.proxy.isValid: true
visit: config.proxy.url: socks5://localhost:10800
Proxy configuration detected: socks5://localhost:10800
Using proxy: socks5://localhost:10800

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should prioritize SOCKS5 over HTTP proxy
Page closed event detected

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should prioritize SOCKS5 over HTTP proxy
We assume the page closed successfully for url:  http://example.com/

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should prioritize SOCKS5 over HTTP proxy
Browser closed successfully

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should prioritize SOCKS5 over HTTP proxy
Screenshots directory is empty

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should prioritize SOCKS5 over HTTP proxy
Session cleanup completed successfully

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a secure HTTPS (MITM) proxy using NODE_EXTRA_CA_CERTS
loader: no error
visit: the current config is  {
  defaultSearchEngines: [ [32m'bing'[39m, [32m'duckduckgo'[39m, [32m'brave'[39m ],
  proxy: {
    url: [32m'https://localhost:8000'[39m,
    enabled: [33mtrue[39m,
    isValid: [33mtrue[39m,
    protocol: [32m'https'[39m,
    error: [1mnull[22m,
    host: [32m'localhost'[39m,
    port: [33m8000[39m,
    username: [32m''[39m,
    password: [32m''[39m,
    agent: { http: [36m[HttpsProxyAgent][39m, https: [36m[HttpsProxyAgent][39m }
  },
  enableCors: [33mfalse[39m,
  corsOrigin: [32m'*'[39m
}
visit: config.proxy.enabled: true
visit: config.proxy.isValid: true
visit: config.proxy.url: https://localhost:8000
Proxy configuration detected: https://localhost:8000
Using proxy: https://localhost:8000

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a secure HTTPS (MITM) proxy using NODE_EXTRA_CA_CERTS
Page closed event detected

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a secure HTTPS (MITM) proxy using NODE_EXTRA_CA_CERTS
We assume the page closed successfully for url:  https://example.com/

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a secure HTTPS (MITM) proxy using NODE_EXTRA_CA_CERTS
Browser closed successfully

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a secure HTTPS (MITM) proxy using NODE_EXTRA_CA_CERTS
Screenshots directory is empty

stdout | .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a secure HTTPS (MITM) proxy using NODE_EXTRA_CA_CERTS
Session cleanup completed successfully

 â¯ .test/engines/proxy_e2e.test.ts (7 tests | 3 failed | 1 skipped) 2180ms
   âœ“ Proxy E2E Tests > should route traffic through an HTTP proxy  647ms
   âœ“ Proxy E2E Tests > should route traffic through a SOCKS5 proxy  465ms
   Ã— Proxy E2E Tests > should route traffic through a SOCKS4a proxy 145ms
     â†’ Page visit failed: Navigation failed: page.goto: net::ERR_NO_SUPPORTED_PROXIES at http://example.com/
Call log:
[2m  - navigating to "http://example.com/", waiting until "domcontentloaded"[22m

   Ã— Proxy E2E Tests > should route traffic through a SOCKS4 proxy 133ms
     â†’ Page visit failed: Navigation failed: page.goto: net::ERR_CONNECTION_CLOSED at http://example.com/
Call log:
[2m  - navigating to "http://example.com/", waiting until "domcontentloaded"[22m

   â†“ Proxy E2E Tests > should route traffic through a SOCKS5 proxy with authentication
   âœ“ Proxy E2E Tests > should prioritize SOCKS5 over HTTP proxy  526ms
   Ã— Proxy E2E Tests > should route traffic through a secure HTTPS (MITM) proxy using NODE_EXTRA_CA_CERTS 263ms
     â†’ Page visit failed: Navigation failed: page.goto: net::ERR_PROXY_CERTIFICATE_INVALID at https://example.com/
Call log:
[2m  - navigating to "https://example.com/", waiting until "domcontentloaded"[22m


â¯â¯â¯â¯â¯â¯â¯ Failed Tests 3 â¯â¯â¯â¯â¯â¯â¯

 FAIL  .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a SOCKS4a proxy
McpError: Page visit failed: Navigation failed: page.goto: net::ERR_NO_SUPPORTED_PROXIES at http://example.com/
Call log:
[2m  - navigating to "http://example.com/", waiting until "domcontentloaded"[22m

 â¯ visitPage src/engines/visit_page/visit.ts:320:11
    318|     return result;
    319|   } catch (error) {
    320|     throw new McpError(
       |           ^
    321|       ErrorCode.InternalError,
    322|       `Page visit failed: ${(error as Error).message}`
 â¯ Server.<anonymous> .test/engines/proxy_e2e.test.ts:96:26

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/3]â¯

 FAIL  .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a SOCKS4 proxy
McpError: Page visit failed: Navigation failed: page.goto: net::ERR_CONNECTION_CLOSED at http://example.com/
Call log:
[2m  - navigating to "http://example.com/", waiting until "domcontentloaded"[22m

 â¯ visitPage src/engines/visit_page/visit.ts:320:11
    318|     return result;
    319|   } catch (error) {
    320|     throw new McpError(
       |           ^
    321|       ErrorCode.InternalError,
    322|       `Page visit failed: ${(error as Error).message}`
 â¯ Server.<anonymous> .test/engines/proxy_e2e.test.ts:119:26

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/3]â¯

 FAIL  .test/engines/proxy_e2e.test.ts > Proxy E2E Tests > should route traffic through a secure HTTPS (MITM) proxy using NODE_EXTRA_CA_CERTS
McpError: Page visit failed: Navigation failed: page.goto: net::ERR_PROXY_CERTIFICATE_INVALID at https://example.com/
Call log:
[2m  - navigating to "https://example.com/", waiting until "domcontentloaded"[22m

 â¯ visitPage src/engines/visit_page/visit.ts:320:11
    318|     return result;
    319|   } catch (error) {
    320|     throw new McpError(
       |           ^
    321|       ErrorCode.InternalError,
    322|       `Page visit failed: ${(error as Error).message}`
 â¯ .test/engines/proxy_e2e.test.ts:187:20

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/3]â¯


 Test Files  1 failed (1)
      Tests  3 failed | 3 passed | 1 todo (7)
   Start at  21:15:12
   Duration  2.99s (transform 35ms, setup 0ms, collect 563ms, tests 2.18s, environment 0ms, prepare 46ms)

